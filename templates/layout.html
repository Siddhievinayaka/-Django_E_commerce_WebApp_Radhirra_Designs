{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="color-scheme" content="light dark" />
    <title>
      {% block title %}
        Radhirra Designs
      {% endblock %}
    </title>
    {% comment %} <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" /> {% endcomment %}

    <link rel="icon" href="{% static 'companyImg/logo.png' %}" type="image/png" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    {% comment %} <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" /> {% endcomment %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

    <link rel="stylesheet" href="{% static 'css/custom.css' %}?v=1.1" />
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@700&family=Poppins:wght@400;500&display=swap');
      .brand-logo {
        font-family: 'Cormorant Garamond', serif;
        letter-spacing: 0.1em;
      }
      body {
        font-family: 'Poppins', sans-serif;
      }
      #sidebar,
      #search-dropdown {
        transition: all 0.3s ease-in-out;
      }
      #sidebar-overlay {
        transition: opacity 0.3s ease-in-out;
      }
    </style>

    <script>
      if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark')
      } else {
        document.documentElement.classList.remove('dark')
      }
    </script>

    <script>
      {% comment %} tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            colors: {
              primary: '#f15096',
              secondary: '#f2b4c4',
              'dark-bg': '#2a2145',
              'light-bg': '#3e306b',
              'text-main': '#f3e8ff',
              'text-secondary': '#d1c4e9'
            }
          }
        }
      } {% endcomment %}
      module.exports = {
  theme: {
    extend: {
      colors: {
        'dark-bg': '#1a1a2e',      // Define explicit hex values
        'light-bg': '#f8f9fa',
        'text-main': '#ffffff',
        'text-secondary': '#b0b0b0',
        'primary': '#e4a8cc',
        'secondary': '#d4a8bc',
      }
    }
  }
}

      
    </script>

    <script>
      function getCookie(name) {
        let cookieValue = null
        if (document.cookie && document.cookie !== '') {
          const cookies = document.cookie.split(';')
          for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim()
            if (cookie.substring(0, name.length + 1) === name + '=') {
              cookieValue = decodeURIComponent(cookie.substring(name.length + 1))
              break
            }
          }
        }
        return cookieValue
      }
      
      const csrftoken = getCookie('csrftoken')
      
      var cart = JSON.parse(getCookie('cart'))
      if (cart == undefined) {
        cart = {}
        document.cookie = 'cart=' + JSON.stringify(cart) + ';domain=;path=/'
      }
      
      var user = '{{request.user}}'
    </script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </head>

  <body class="bg-gray-50 dark:bg-dark-bg text-gray-900 dark:text-text-main" data-user-authenticated="{% if user.is_authenticated %}true{% else %}false{% endif %}">
    {% include 'includes/_header.html' %}
    {% include 'includes/_sidebar.html' %}

    <main class="flex-grow">
      {% block content %}

      {% endblock %}
    </main>

    {% if request.resolver_match.url_name != 'profile' %}
      {% include 'includes/_footer.html' %}
    {% endif %}

    <!-- Cart Drawer -->
    {% include 'includes/cart_drawer.html' %}
    
    <!-- Login Modal -->
    {% include 'includes/login_modal.html' %}

    <!-- FIXED ORDER -->
    {% comment %} <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script> {% endcomment %}
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        new Swiper('.hero-slider', {
          loop: true,
          autoplay: { delay: 5000, disableOnInteraction: false },
          pagination: { el: '.swiper-pagination', clickable: true },
          effect: 'fade',
          fadeEffect: { crossFade: true }
        })
      })
    </script>
    <script src="{% static 'js/scroller.js' %}" defer></script>
    <script src="{% static 'js/main.js' %}?v=1.2" defer></script>
    <script src="{% static 'js/cart.js' %}" defer></script>
    <script src="{% static 'js/cart_drawer.js' %}" defer></script>
  </body>
</html>
